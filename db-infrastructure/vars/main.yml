---
# vars file for db-infrastructure

############### https://hetzner.com/ cloud configuration ##################

hcloud_token: "{{ lookup('env','HCLOUD_TOKEN') }}"
hcloud_image: "{{ lookup('env','HCLOUD_IMAGE') | default('debian-12', true) }}"
hcloud_location: "{{ lookup('env','HCLOUD_REGION') | default('fsn1', true) }}"

############## Network Configuration ##################

db_network_name: "{{ lookup('env','DB_NETWORK_NAME') | default('db-network', true) }}"
db_network_ip_range: "{{ lookup('env','DB_NETWORK_IP_RANGE') | default('10.0.0.0/16', true) }}"
db_network_zone: "{{ lookup('env','NETWORK_ZONE') | default('eu-central', true) }}"


chronologix_network_subnet_1_name : "{{ lookup('env','NETWORK_SUBNET_1_NAME') | default('chronologix-subnet-1', true) }}"
chronologix_network_subnet_2_name : "{{ lookup('env','NETWORK_SUBNET_2_NAME') | default('chronologix-subnet-2', true) }}"
chronologix_network_subnet_1_ip_range : "{{ lookup('env','NETWORK_SUBNET_1') | default('10.0.1.0/24', true) }}"
chronologix_network_subnet_2_ip_range : "{{ lookup('env','NETWORK_SUBNET_2') | default('10.0.2.0/24', true) }}"


################ DB Server configuration ##################

db_server_count: "{{ lookup('env','DB_SERVER_COUNT') | default(1, true) }}"
db_server_name: "{{ lookup('env','DB_SERVER_NAME') | default('db-server', true) }}"
db_server_type: "{{ lookup('env','DB_SERVER_TYPE') | default('cx22', true) }}"

db_port: "{{ lookup('env','DB_PORT') | default('5432', true) }}"
db_replication_port: "{{ lookup('env','DB_REPLICATION_PORT') | default('5433', true) }}"
db_monitoring_port: "{{ lookup('env','DB_MONITORING_PORT') | default('9100', true) }}"
db_custom_port: "{{ lookup('env','DB_CUSTOM_PORT') | default('8080', true) }}"


############## Firewall Configuration ##################
db_cluster_firewall_name: "{{ lookup('env','DB_CLUSTER_FIREWALL_NAME') | default('db-cluster-firewall', true) }}"

############## Network Access Configuration ##################
app_network_ip_range: "{{ lookup('env','APP_NETWORK_IP_RANGE') | default('10.1.0.0/16', true) }}"
monitoring_network_ip_range: "{{ lookup('env','MONITORING_NETWORK_IP_RANGE') | default('10.2.0.0/24', true) }}"



############# SSH Key Configuration ##################

ssh_keys: "{{ lookup('env', 'HETZNER_SSH_KEYS_JSON') | from_json }}"